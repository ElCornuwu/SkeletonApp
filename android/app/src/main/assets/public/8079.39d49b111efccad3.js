"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8079],{8079:(q,b,c)=>{c.r(b),c.d(b,{HomePageModule:()=>K});var g=c(177),s=c(4742),u=c(4341),j=c(8986),e=c(3953);const E=()=>["/home/usuario"],P=()=>["/home/ruta"],_=()=>["/login"];let S=(()=>{var o;class t{}return(o=t).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-home"]],decls:29,vars:6,consts:[["side","end","contentId","main-content"],["color","primary"],["color","secondary"],[1,"ion-padding"],["fill","clear",3,"routerLink"],["name","person"],["name","car-sport"],["name","exit"],["id","main-content",1,"ion-page"],["slot","end"]],template:function(n,r){1&n&&(e.j41(0,"ion-content")(1,"ion-menu",0)(2,"ion-header")(3,"ion-toolbar",1)(4,"ion-title",2),e.EFF(5,"Menu"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-list")(8,"ion-item")(9,"ion-button",4),e.nrm(10,"ion-icon",5),e.EFF(11," Perfil"),e.k0s()(),e.j41(12,"ion-item")(13,"ion-button",4),e.nrm(14,"ion-icon",6),e.EFF(15,"Viaje"),e.k0s()(),e.j41(16,"ion-item")(17,"ion-button",4),e.nrm(18,"ion-icon",7),e.EFF(19," Cerrar sesion"),e.k0s()()()()(),e.j41(20,"div",8)(21,"ion-header")(22,"ion-toolbar",1)(23,"ion-title"),e.EFF(24,"Bienvenido,"),e.k0s(),e.j41(25,"ion-buttons",9),e.nrm(26,"ion-menu-button"),e.k0s()()(),e.j41(27,"ion-content",3),e.nrm(28,"ion-tabs"),e.k0s()()()),2&n&&(e.R7$(9),e.Y8G("routerLink",e.lJ4(3,E)),e.R7$(4),e.Y8G("routerLink",e.lJ4(4,P)),e.R7$(4),e.Y8G("routerLink",e.lJ4(5,_)))},dependencies:[s.Jm,s.QW,s.W9,s.eU,s.iq,s.uz,s.nf,s.oS,s.MC,s.BC,s.ai,s.p4,s.N7,j.Wk],styles:["ion-menu[_ngcontent-%COMP%]{--background: white }ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: white }ion-item[_ngcontent-%COMP%]{--background: white ;--border-color: #e0e0e0}ion-button[_ngcontent-%COMP%]{--color: #333333}ion-icon[_ngcontent-%COMP%]{margin-right:20px;color:#333}ion-title[_ngcontent-%COMP%]{font-size:22px;color:#fff}"]}),t})();var F=c(467);let C=(()=>{var o;class t{constructor(n){this.modalCtrl=n,this.nuevoViaje={destino:"",hora:"",precio:0}}ngOnInit(){this.viaje&&(this.nuevoViaje={...this.viaje})}cerrarModal(){this.modalCtrl.dismiss()}agregarViaje(){this.modalCtrl.dismiss({viaje:this.nuevoViaje})}}return(o=t).\u0275fac=function(n){return new(n||o)(e.rXU(s.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-formulario-viaje"]],inputs:{viaje:"viaje"},decls:23,vars:3,consts:[["slot","end"],[3,"click"],[3,"ngSubmit"],["name","destino","required","",3,"ngModelChange","ngModel"],["name","hora","required","",3,"ngModelChange","ngModel"],["type","number","name","precio","required","",3,"ngModelChange","ngModel"],["type","submit","expand","block"]],template:function(n,r){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Agregar Viaje"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return r.cerrarModal()}),e.EFF(6,"Cerrar"),e.k0s()()()(),e.j41(7,"ion-content")(8,"form",2),e.bIt("ngSubmit",function(){return r.agregarViaje()}),e.j41(9,"ion-item")(10,"ion-label"),e.EFF(11,"Destino"),e.k0s(),e.j41(12,"ion-input",3),e.mxI("ngModelChange",function(l){return e.DH7(r.nuevoViaje.destino,l)||(r.nuevoViaje.destino=l),l}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label"),e.EFF(15,"Hora"),e.k0s(),e.j41(16,"ion-input",4),e.mxI("ngModelChange",function(l){return e.DH7(r.nuevoViaje.hora,l)||(r.nuevoViaje.hora=l),l}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label"),e.EFF(19,"Precio"),e.k0s(),e.j41(20,"ion-input",5),e.mxI("ngModelChange",function(l){return e.DH7(r.nuevoViaje.precio,l)||(r.nuevoViaje.precio=l),l}),e.k0s()(),e.j41(21,"ion-button",6),e.EFF(22,"Guardar"),e.k0s()()()),2&n&&(e.R7$(12),e.R50("ngModel",r.nuevoViaje.destino),e.R7$(4),e.R50("ngModel",r.nuevoViaje.hora),e.R7$(4),e.R50("ngModel",r.nuevoViaje.precio))},dependencies:[u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,s.Jm,s.QW,s.W9,s.eU,s.$w,s.uz,s.he,s.BC,s.ai,s.su,s.Gw]}),t})();var y=c(1626),w=c(9974),V=c(4360),x=c(3669),U=c(1985),T=c(8359);class D extends T.yU{constructor(t,i){super()}schedule(t,i=0){return this}}const h={setInterval(o,t,...i){const{delegate:n}=h;return null!=n&&n.setInterval?n.setInterval(o,t,...i):setInterval(o,t,...i)},clearInterval(o){const{delegate:t}=h;return((null==t?void 0:t.clearInterval)||clearInterval)(o)},delegate:void 0};var H=c(7908);const k={now:()=>(k.delegate||Date).now(),delegate:void 0};class m{constructor(t,i=m.now){this.schedulerActionCtor=t,this.now=i}schedule(t,i=0,n){return new this.schedulerActionCtor(this,t).schedule(n,i)}}m.now=k.now;const G=new class O extends m{constructor(t,i=m.now){super(t,i),this.actions=[],this._active=!1}flush(t){const{actions:i}=this;if(this._active)return void i.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=i.shift());if(this._active=!1,n){for(;t=i.shift();)t.unsubscribe();throw n}}}(class A extends D{constructor(t,i){super(t,i),this.scheduler=t,this.work=i,this.pending=!1}schedule(t,i=0){var n;if(this.closed)return this;this.state=t;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,i)),this.pending=!0,this.delay=i,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(a,this.id,i),this}requestAsyncId(t,i,n=0){return h.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,i,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return i;null!=i&&h.clearInterval(i)}execute(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,i);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,i){let r,n=!1;try{this.work(t)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:i}=this,{actions:n}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,H.o)(n,this),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null,super.unsubscribe()}}});var N=c(9470);var B=c(8750);let z=(()=>{var o;class t{constructor(n){this.http=n,this.httpOptions={headers:new y.Lr({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})},this.apiURL="http://localhost:3000"}getViajes(){return this.http.get(this.apiURL+"/viaje").pipe(function W(o=1/0){let t;t=o&&"object"==typeof o?o:{count:o};const{count:i=1/0,delay:n,resetOnSuccess:r=!1}=t;return i<=0?x.D:(0,w.N)((a,l)=>{let d,p=0;const v=()=>{let M=!1;d=a.subscribe((0,V._)(l,f=>{r&&(p=0),l.next(f)},void 0,f=>{if(p++<i){const I=()=>{d?(d.unsubscribe(),d=null,v()):M=!0};if(null!=n){const Z="number"==typeof n?function L(o=0,t,i=G){let n=-1;return null!=t&&((0,N.m)(t)?i=t:n=t),new U.c(r=>{let a=function $(o){return o instanceof Date&&!isNaN(o)}(o)?+o-i.now():o;a<0&&(a=0);let l=0;return i.schedule(function(){r.closed||(r.next(l++),0<=n?this.schedule(void 0,n):r.complete())},a)})}(n):(0,B.Tg)(n(f,p)),R=(0,V._)(l,()=>{R.unsubscribe(),I()},()=>{l.complete()});Z.subscribe(R)}else I()}else l.error(f)})),M&&(d.unsubscribe(),d=null,v())};v()})}(3))}deleteViaje(n){return this.http.delete(this.apiURL+"/viaje/"+n,{responseType:"json"})}addViaje(n){return n.id?this.http.put(this.apiURL+"/viaje/"+n.id,n,{responseType:"json"}):this.http.post(this.apiURL+"/viaje",n,{responseType:"json"})}}return(o=t).\u0275fac=function(n){return new(n||o)(e.KVO(y.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();function Y(o,t){if(1&o){const i=e.RV6();e.j41(0,"li")(1,"strong"),e.EFF(2,"Destino:"),e.k0s(),e.EFF(3),e.nrm(4,"br"),e.j41(5,"strong"),e.EFF(6,"Hora:"),e.k0s(),e.EFF(7),e.nrm(8,"br"),e.j41(9,"strong"),e.EFF(10,"Precio:"),e.k0s(),e.EFF(11),e.nrm(12,"br"),e.j41(13,"ion-button",2),e.bIt("click",function(){const r=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.mostrarFormularioEditarViaje(r))}),e.EFF(14,"Editar"),e.k0s(),e.j41(15,"ion-button",2),e.bIt("click",function(){const r=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.eliminarViaje(r.id))}),e.EFF(16,"Eliminar"),e.k0s()()}if(2&o){const i=t.$implicit;e.R7$(3),e.SpI(" ",i.destino," "),e.R7$(4),e.SpI(" ",i.hora," "),e.R7$(4),e.SpI(" $",i.precio," ")}}function J(o,t){1&o&&(e.j41(0,"div")(1,"p"),e.EFF(2,"No hay viajes disponibles."),e.k0s()())}const X=[{path:"",component:S,children:[{path:"ruta",component:(()=>{var o;class t{constructor(n,r){this.datosService=n,this.modalCtrl=r,this.viajes=[]}ngOnInit(){this.loadViajes()}loadViajes(){this.datosService.getViajes().subscribe(n=>{console.log(n),this.viajes=n},n=>{console.error("Error al obtener los viajes: ",n)})}eliminarViaje(n){this.datosService.deleteViaje(n).subscribe(()=>{console.log(`Viaje con ID ${n} eliminado`),this.loadViajes()},r=>{console.error("Error al eliminar el viaje: ",r)})}mostrarFormularioNuevoViaje(){var n=this;return(0,F.A)(function*(){const r=yield n.modalCtrl.create({component:C});yield r.present();const{data:a}=yield r.onWillDismiss();a&&a.viaje&&n.datosService.addViaje(a.viaje).subscribe(()=>{console.log("Nuevo viaje agregado"),n.loadViajes()},l=>{console.error("Error al agregar el viaje: ",l)})})()}mostrarFormularioEditarViaje(n){var r=this;return(0,F.A)(function*(){const a=yield r.modalCtrl.create({component:C,componentProps:{viaje:n}});yield a.present();const{data:l}=yield a.onWillDismiss();l&&l.viaje&&r.datosService.addViaje(l.viaje).subscribe(()=>{console.log("Viaje actualizado"),r.loadViajes()},p=>{console.error("Error al actualizar el viaje: ",p)})})()}}return(o=t).\u0275fac=function(n){return new(n||o)(e.rXU(z),e.rXU(s.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-ruta"]],decls:12,vars:2,consts:[["show-clear-button","focus","value","Show on Focus"],[2,"text-align","center"],[3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,r){1&n&&(e.j41(0,"ion-content")(1,"div"),e.nrm(2,"ion-searchbar",0),e.j41(3,"div")(4,"h2"),e.EFF(5,"Lista de Viajes"),e.k0s(),e.j41(6,"div",1)(7,"ion-button",2),e.bIt("click",function(){return r.mostrarFormularioNuevoViaje()}),e.EFF(8,"Agregar Viaje"),e.k0s()(),e.j41(9,"ul"),e.DNE(10,Y,17,3,"li",3),e.k0s()(),e.DNE(11,J,3,0,"div",4),e.k0s()()),2&n&&(e.R7$(10),e.Y8G("ngForOf",r.viajes),e.R7$(),e.Y8G("ngIf",0===r.viajes.length))},dependencies:[g.Sq,g.bT,s.Jm,s.W9,s.S1,s.Gw],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #ffffff;padding:20px}ion-searchbar[_ngcontent-%COMP%]{--background: #f0f0f0;--placeholder-color: black;color:#333;margin-bottom:20px;border-radius:10px}h2[_ngcontent-%COMP%]{font-size:24px;color:#333;margin-bottom:15px;text-align:center}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{background-color:#f9f9f9;border:2px solid #dddddd;padding:15px;margin-bottom:10px;margin-right:20px;margin-left:20px;border-radius:10px;color:#333}p[_ngcontent-%COMP%]{color:#666;font-size:16px}']}),t})()},{path:"usuario",component:(()=>{var o;class t{constructor(){}ngOnInit(){}}return(o=t).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-usuario"]],decls:0,vars:0,template:function(n,r){}}),t})()}]}];let Q=(()=>{var o;class t{}return(o=t).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[j.iI.forChild(X),j.iI]}),t})(),K=(()=>{var o;class t{}return(o=t).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,u.YN,s.bv,Q]}),t})()}}]);